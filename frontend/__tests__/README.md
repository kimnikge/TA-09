# Автотесты для регистрации торгового представителя

## Описание

Этот автотест проверяет функциональность регистрации торгового представителя в системе.

## Тестируемые сценарии

1. **Успешная регистрация** - проверяет, что торговый представитель может быть успешно зарегистрирован с корректными данными
2. **Обработка ошибок** - проверяет корректную обработку ошибок при регистрации (например, email уже существует)
3. **Валидация полей** - проверяет, что все обязательные поля должны быть заполнены
4. **Структура профиля** - проверяет, что профиль создается с правильными данными
5. **Последовательность операций** - проверяет, что регистрация и создание профиля выполняются в правильном порядке

## Запуск тестов

```bash
# Запустить все тесты
npm test

# Запустить только тесты регистрации торгового представителя
npm test -- sales-rep-registration.test.ts

# Запустить тесты с отчетом о покрытии
npm test -- --coverage
```

## Структура теста

Автотест использует:
- **Jest** - основной тестовый фреймворк
- **Моки** - для имитации работы с Supabase
- **TypeScript** - для типизации

## Данные для тестирования

Автотест использует следующие тестовые данные:
- Email: `test@company.com`
- Имя: `Иван Петров`
- Компания: `ООО Торговая компания`
- Телефон: `+7 999 123 45 67`

## Проверяемые операции

1. Регистрация пользователя через Supabase Auth
2. Создание профиля в таблице profiles
3. Установка роли 'sales_rep'
4. Установка статуса approved: false (требует подтверждения администратора)
