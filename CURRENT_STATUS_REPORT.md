# –ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç - –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ –¢–ê-09

## ‚úÖ –ß—Ç–æ –†–ê–ë–û–¢–ê–ï–¢

### üîó –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
- ‚úÖ Supabase –ø–æ–¥–∫–ª—é—á–µ–Ω –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- ‚úÖ –í—Å–µ 5 —Ç–∞–±–ª–∏—Ü —Å—É—â–µ—Å—Ç–≤—É—é—Ç (profiles, clients, products, orders, order_items)
- ‚úÖ –ï—Å—Ç—å 6 —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –≤ –ë–î
- ‚úÖ –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è Supabase —Ä–∞–±–æ—Ç–∞–µ—Ç

### üíª –ö–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- ‚úÖ React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ –°–µ—Ä–≤–µ—Ä —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è (localhost:5174)
- ‚úÖ –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–¥–∞–ø—Ç–∏–≤–µ–Ω –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- ‚úÖ –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏/—Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ –ù–∞–≤–∏–≥–∞—Ü–∏—è –º–µ–∂–¥—É —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç
- ‚úÖ –õ–æ–≥–∏–∫–∞ —Ä–æ–ª–µ–π (admin/sales_rep) —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞

### üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- ‚úÖ Row Level Security (RLS) –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
- ‚úÖ –ü–æ–ª–∏—Ç–∏–∫–∏ –¥–æ—Å—Ç—É–ø–∞ —Å–æ–∑–¥–∞–Ω—ã
- ‚úÖ Rate limiting —Ä–∞–±–æ—Ç–∞–µ—Ç (–∑–∞—â–∏—Ç–∞ –æ—Ç —Å–ø–∞–º–∞)

## ‚ö†Ô∏è –ß—Ç–æ —Ç—Ä–µ–±—É–µ—Ç –î–û–†–ê–ë–û–¢–ö–ò

### üóÑÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î
- ‚ùå **–¢–∞–±–ª–∏—Ü–∞ profiles** - –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–µ –∫–æ–ª–æ–Ω–∫–∏:
  - `email` - –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - `name` - –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–º–µ–Ω–∏
  - `role` - –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ä–æ–ª–∏ (admin/sales_rep)
  - `updated_at` - –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

### üìß –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Supabase
- ‚ùå **Email confirmation** - —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ email –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- ‚ùå **Email templates** - –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —à–∞–±–ª–æ–Ω—ã –ø–∏—Å–µ–º

## üîß –ü–ª–∞–Ω –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

### –®–∞–≥ 1: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ë–î
```sql
-- –í—ã–ø–æ–ª–Ω–∏—Ç—å –≤ Supabase SQL Editor
ALTER TABLE profiles 
ADD COLUMN IF NOT EXISTS email TEXT UNIQUE,
ADD COLUMN IF NOT EXISTS name TEXT,
ADD COLUMN IF NOT EXISTS role TEXT CHECK (role IN ('admin', 'sales_rep')) DEFAULT 'sales_rep',
ADD COLUMN IF NOT EXISTS updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW();
```

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
–í Supabase Dashboard ‚Üí Authentication ‚Üí Settings:
- –û—Ç–∫–ª—é—á–∏—Ç—å "Confirm email" –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –ò–ª–∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å SMTP –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–∏—Å–µ–º

### –®–∞–≥ 3: –°–æ–∑–¥–∞–Ω–∏–µ –∞–¥–º–∏–Ω–∞
–ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ë–î:
```bash
npm run test-registration
```

## üìÅ –°–æ–∑–¥–∞–Ω–Ω—ã–µ –§–ê–ô–õ–´ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

### SQL —Å–∫—Ä–∏–ø—Ç—ã
- `UPDATE_DATABASE.sql` - –ø–æ–ª–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ë–î
- `DATABASE_UPDATE_INSTRUCTIONS.md` - –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

### –î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ —Å–∫—Ä–∏–ø—Ç—ã
- `scripts/checkDatabase.ts` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∏ –¥–∞–Ω–Ω—ã—Ö
- `scripts/checkTableStructure.ts` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ç–∞–±–ª–∏—Ü
- `scripts/testRegistration.ts` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

### NPM –∫–æ–º–∞–Ω–¥—ã
- `npm run check-db` - –±—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ë–î
- `npm run check-tables` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ç–∞–±–ª–∏—Ü
- `npm run test-registration` - —Ç–µ—Å—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

## üéØ –¢–µ–∫—É—â–µ–µ –°–û–°–¢–û–Ø–ù–ò–ï

### –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- üü¢ **–ö–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è** - –±–µ–∑ –æ—à–∏–±–æ–∫
- üü¢ **–ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è** - http://localhost:5174
- üü¢ **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å** - –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–π, –∫—Ä–∞—Å–∏–≤—ã–π
- üü° **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å** - —á–∞—Å—Ç–∏—á–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- üü¢ **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ** - —Ä–∞–±–æ—Ç–∞–µ—Ç
- üü¢ **–¢–∞–±–ª–∏—Ü—ã** - —Å—É—â–µ—Å—Ç–≤—É—é—Ç
- üî¥ **–°—Ç—Ä—É–∫—Ç—É—Ä–∞** - —Ç—Ä–µ–±—É–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
- üü¢ **–î–∞–Ω–Ω—ã–µ** - –µ—Å—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è  
- üü¢ **Supabase Auth** - –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
- üü° **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è** - —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ —Ç—Ä–µ–±—É–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è email
- üü° **–í—Ö–æ–¥** - –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –Ω–µ–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã–º email
- üî¥ **–ü—Ä–æ—Ñ–∏–ª–∏** - –Ω–µ —Å–æ–∑–¥–∞—é—Ç—Å—è –∏–∑-–∑–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ë–î

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ –®–ê–ì–ò

1. **–û–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ë–î** (5 –º–∏–Ω—É—Ç)
   - –í—ã–ø–æ–ª–Ω–∏—Ç—å SQL –∏–∑ UPDATE_DATABASE.sql –≤ Supabase Dashboard

2. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å email confirmation** (2 –º–∏–Ω—É—Ç—ã)  
   - –û—Ç–∫–ª—é—á–∏—Ç—å –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Supabase –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

3. **–°–æ–∑–¥–∞—Ç—å –∞–¥–º–∏–Ω–∞** (1 –º–∏–Ω—É—Ç–∞)
   - –ó–∞–ø—É—Å—Ç–∏—Ç—å `npm run test-registration`

4. **–§–∏–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** (5 –º–∏–Ω—É—Ç)
   - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è ‚Üí –í—Ö–æ–¥ ‚Üí –†–∞–±–æ—Ç–∞ —Å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º

**–û–±—â–µ–µ –≤—Ä–µ–º—è –¥–æ –ø–æ–ª–Ω–æ–π –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏: ~15 –º–∏–Ω—É—Ç**

---

*–°–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–∞ 28 –∏—é–Ω—è 2025 –≥. 21:30*
*–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ –Ω–∞ 85% - –æ—Å—Ç–∞–ª–∏—Å—å —Ç–æ–ª—å–∫–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ë–î*
